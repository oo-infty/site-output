<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>oo-infty's site</title><link>https://oo-infty.netlify.app/</link><description>Recent content on oo-infty's site</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Fri, 05 Jul 2024 15:42:09 +0800</lastBuildDate><atom:link href="https://oo-infty.netlify.app/index.xml" rel="self" type="application/rss+xml"/><item><title>用 NixOS 部署 Minecraft 服务器</title><link>https://oo-infty.netlify.app/posts/deploy-a-minecraft-server-with-nixos/</link><pubDate>Fri, 05 Jul 2024 15:42:09 +0800</pubDate><guid>https://oo-infty.netlify.app/posts/deploy-a-minecraft-server-with-nixos/</guid><description>紧张的考试周过后，终于有时间和朋友玩 Minecraft 了。为了方便进行多人游戏，我和 @whitepaperdog 决定购买一台云主机作为服务器。鉴于 NixOS 强大的 reproducibility 以及我这半年使用 NixOS 的优秀体验，我决定将服务器的系统更换为 NixOS，并在其之上部署 Minecraft 服务。
准备工作 NixOS 安装 这台服务器并不是用我的账号买的，所以我没有办法直接在控制台上传 NixOS 的镜像进行安装。等我拿到 root 密码后，系统就已经是 Ubuntu 了。在此情况下，我选择了使用 NixOS-infect。NixOS-infect 是一个 shell 脚本，其在服务器上安装 Nix，再用 Nix 构建出 NixOS，最后修改 bootloader 配置，添加 NixOS 的启动项并删除其他东西。
使用 NixOS-infect 前需要配置好访问 root 的 SSH 公钥，这是因为 NixOS-infect 并没有提供设置 root 密码的步骤，并且 NixOS 默认情况下将禁用 SSH 通过密码登录 root。NixOS-infect 脚本会将原有的 root 的公钥重新导入到新的 NixOS 里。
由于服务器在国内，所以访问 nixpkgs 的 cache 将会非常慢，在安装 NixOS 之前需要配置好 cache 镜像。编辑脚本，在完成 Nix 的安装后，配置镜像源：
infect() { # .</description></item><item><title>About</title><link>https://oo-infty.netlify.app/about/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://oo-infty.netlify.app/about/</guid><description>about</description></item></channel></rss>